<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" >
<ui:composition template="templatkaSystemu.xhtml">
	<ui:define name="title">Dentus</ui:define>
	<ui:define name="content">
	<h:form id="forma">
		<div style="margin-top:100px; margin-left:50px;">
	  		<h:outputText styleClass="h1" value="Profil pacjenta " />
	  	
	  	<p:commandButton value="Edytuj" style="margin-left:450px;  width:100px" actionListener="#{panelPBB.onEdytuj}"/>
	  	<p:commandButton value="Usuń" style="margin-left:20px;width:100px" actionListener="#{panelPBB.onUsun}"/>
	  	</div>
		<p:tabView  styleClass="tablica" >
			<p:tab  title="Dane podstawowe" titleStyleClass="tabStyle">
				<h:panelGrid columns="2">
					<h:outputText value="nazwisko:" />
					<h:outputText value="#{panelPBB.selectedPatient.nazwisko}" />
					<h:outputText value="imię:" />
					<h:outputText value="#{panelPBB.selectedPatient.imie}" />
					<h:outputText value="data urodznia:" />
					<h:outputText value="#{panelPBB.selectedPatient.birthDayString}" />
					<h:outputText value="adres" />
					<h:outputText value="#{panelPBB.selectedPatient.adres1}" />
					<h:outputText value="" />
					<h:outputText value="#{panelPBB.selectedPatient.adres2}" />
					<h:outputText value="" />
					<h:outputText value="#{panelPBB.selectedPatient.adres3}" />
					<h:outputText value="telefon:" />
					<h:outputText value="#{panelPBB.selectedPatient.telefon}" />
					<h:outputText value="email:" />
					<h:outputText value="#{panelPBB.selectedPatient.email}" />
				</h:panelGrid>
					
			</p:tab>
			<p:tab  title="Dane medyczne" titleStyleClass="tabStyle">
				<h:panelGrid columns="2">
				<h:outputText value="alergie:" />
					<h:outputText value="#{panelPBB.selectedPatient.alergie}" />
					<h:outputText value="inne choroby:" />
					<h:outputText value="#{panelPBB.selectedPatient.choroby}" />
				</h:panelGrid>	
			</p:tab>
			<p:tab  title="Historia leczenia" titleStyleClass="tabStyle">
				
				
				
				<h:form id="form">
					<p:commandButton  value="Dodaj wpis"   actionListener="#{panelPBB.onNowyWpis}" style="margin-left:600px; margin-bottom:20px"  type="submit" ajax="false" >	
		  				<p:ajax update=":wpisEdytor"/>
		  			</p:commandButton>
		  			
		  			<p:dataTable id= "wpisy" value="#{panelPBB.historyModel}" dblClickSelect="false" selection="#{panelPBB.selectedWpis}" rowKey="#{wpis.id}" selectionMode="single" var= "wpis" styleClass="wpisy" emptyMessage="Brak wpisów">
				  		
				  		<p:column selectionMode="single"/>
				  		
				  		<p:column headerText="Data">
				  			<h:outputText  value="#{wpis.data}"/>
				  		</p:column>
				  		<p:column headerText="Rozpoznanie">
				  			<h:outputText value="#{wpis.rozpoznanie}"/>
				  		</p:column>
				  		<p:column headerText="Lecznie">
				  			<h:outputText value="#{wpis.leczenie}"/>
				  		</p:column>
				  		<p:column headerText="Komentarz">
				  			<h:outputText value="#{wpis.komentarz}"/>
			  			</p:column>
			  			 <f:facet name="footer">  
           					 <p:commandButton id="viewCommand" actionListener="#{panelPBB.onRowSelect}" value="doHistorii"  update=":wpisEdytor" />  
       					 </f:facet>
			  		</p:dataTable>	 
		 		</h:form>  
			</p:tab>
		</p:tabView>
	</h:form> 
	<p:dialog id="wpisEdytor" header="EdytujWpis" widgetVar="dlg">  
	    <h:form>  
	    	<h:panelGrid columns="2" cellpadding="5">  
	    		<h:outputLabel for="data" value="Data: " />  
	    		<h:inputText  id="data" value="#{panelPBB.editedWpis.data}" />  
	    		<h:outputLabel for="rozpoznanie" value="Rozpoznanie: " />  
	    		<h:inputText  id="rozpoznanie" value="#{panelPBB.editedWpis.rozpoznanie}" />  
	        	<h:outputLabel for="leczenie" value="Leczenie" />  
	            <h:inputText value="#{panelPBB.editedWpis.leczenie}" id="leczenie" />     
	            <h:outputLabel for="komentarz" value="Komentarz: " />  
	    		<h:inputText  id="komentarz" value="#{panelPBB.editedWpis.komentarz}" /> 
	    		<f:facet name="footer"> 
                <p:commandButton id="Potwierdz" value="Potwierdź" style="float:right" actionListener="#{panelPBB.potwierdzWpis}" update=":forma:j_idt16:form:wpisy" oncomplete="dlg.hide()" />  
                <p:commandButton id="Usun" value="Usuń wpis" style="float:right" actionListener="#{panelPBB.usunWpis}" update=":forma:j_idt16:form:wpisy" oncomplete="dlg.hide()"/>  
            </f:facet>  
	        </h:panelGrid>       
	    </h:form>  
	</p:dialog>    	
	
	 

	 
	  
	  
	  
	</ui:define>
</ui:composition>
</html>